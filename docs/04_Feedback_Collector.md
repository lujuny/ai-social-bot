# 数据监控回收模块

#### 1. 模块概述

**目标**：闭环的“感知”。回收已发布内容的数据表现。 **输入**：已发布记录 (`publish_logs`). **输出**：详细的数据报表 (Metrics)。

#### 2. 核心功能

- **多阶段巡查**：发布后 T+1h, T+12h, T+24h, T+7d 分别抓取数据，绘制增长曲线。
- **评论采集**：不仅抓取数量，还抓取评论的具体文本内容（用于情感分析）。
- **异常监控**：如果帖子被删或限流（阅读量极低），标记为异常。

#### 3. 技术方案

- **库**：`playwright` (复用发布模块的登录态).
- **逻辑**：
  - 遍历 `publish_logs` 中 `publish_time` 在近7天内的记录。
  - 访问 `remote_post_url`。
  - 解析 DOM 获取：浏览量、点赞、收藏、评论数、转发。

#### 4. 数据结构 (Table: `content_stats`)

| **字段名**       | **类型** | **描述**                    |
| ---------------- | -------- | --------------------------- |
| `id`             | UUID     | 主键                        |
| `log_id`         | UUID     | 关联的发布记录              |
| `check_time`     | Datetime | 检查时间                    |
| `views`          | Integer  | 阅读/播放量                 |
| `likes`          | Integer  | 点赞数                      |
| `comments_count` | Integer  | 评论数                      |
| `raw_comments`   | JSON     | 热门评论列表 (用于语义分析) |